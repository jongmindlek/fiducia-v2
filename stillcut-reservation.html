<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="stylesheet" href="./style.css"/>
  <title>Stillcut Reservation | Fiducia Collective</title>
</head>
<body>
  <nav class="nav">
    <div class="container nav-inner">
      <div class="brand">FIDUCIA COLLECTIVE</div>
      <div class="nav-links">
        <a class="tab" href="./index.html">메인</a>
        <a class="tab active" href="./ai-stillcut.html">AI 스틸컷(예약)</a>
        <a class="tab" href="./gear.html">장비 예약</a>
        <a class="tab" href="./crew.html">감독/스태프 리스트</a>
        <a class="tab" href="./crew.html#register">감독/스태프 등록</a>
      </div>
    </div>
  </nav>

  <main class="container section">
    <h1>AI Stillcut Reservation</h1>

    <section class="card" style="margin-top:12px">
      <form id="form" class="grid" style="gap:10px">
        <div style="grid-column: span 12;">
          <label class="small">이름*</label>
          <input class="input" name="name" required/>
        </div>

        <div style="grid-column: span 6;">
          <label class="small">연락처*</label>
          <input class="input" name="phone" required/>
        </div>

        <div style="grid-column: span 6;">
          <label class="small">이메일</label>
          <input class="input" name="email" type="email"/>
        </div>

        <div style="grid-column: span 12;">
          <label class="small">프로젝트 제목*</label>
          <input class="input" name="projectTitle" required/>
        </div>

        <div style="grid-column: span 12;">
          <label class="small">레퍼런스 링크 (구글드라이브/유튜브/이미지 URL 등)</label>
          <input class="input" name="referenceUrl" placeholder="https://..."/>
        </div>

        <div style="grid-column: span 12;">
          <label class="small">요청 내용*</label>
          <textarea class="textarea" name="message" rows="6" required></textarea>
        </div>

        <div style="grid-column: span 12;" class="row">
          <button class="cta" type="submit">예약 제출</button>
          <span id="status" class="small"></span>
        </div>
      </form>
    </section>
  </main>

  <footer class="footer">
    <div class="container row" style="justify-content:space-between">
      <div>© Fiducia Collective</div>
      <div class="row">
        <span>Instagram</span>
        <span>Contact</span>
      </div>
    </div>
  </footer>

  <script type="module">
    const form = document.querySelector("#form");
    const status = document.querySelector("#status");

    form.addEventListener("submit", async (e)=>{
      e.preventDefault();
      status.textContent = "전송 중...";

      const fd = new FormData(form);
      const payload = Object.fromEntries(fd.entries());

      try{
        const res = await fetch("/api/stillcut-reserve",{
          method:"POST",
          headers:{ "Content-Type":"application/json" },
          body: JSON.stringify(payload)
        });

        const data = await res.json();
        if(!res.ok){
          throw new Error(data.message || "예약 실패");
        }

        status.textContent = "예약 완료! 곧 연락드릴게요.";
        form.reset();
      }catch(err){
        status.textContent = "예약 실패: " + err.message;
      }
    });
  </script>
</body>
</html>